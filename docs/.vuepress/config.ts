import "dotenv/config";
import { defaultTheme, defineUserConfig } from "vuepress";
import { docsearchPlugin } from "@vuepress/plugin-docsearch";
import { shikiPlugin } from "@vuepress/plugin-shiki";

export default defineUserConfig({
  // https://v2.vuepress.vuejs.org/reference/config.html#head
  head: [
    // favicon generated by https://realfavicongenerator.net/
    [
      "link",
      {
        rel: "apple-touch-icon",
        sizes: "180x180",
        href: "/apple-touch-icon.png",
      },
    ],
    [
      "link",
      {
        rel: "icon",
        type: "image/png",
        sizes: "32x32",
        href: "/favicon-32x32.png",
      },
    ],
    [
      "link",
      {
        rel: "icon",
        type: "image/png",
        sizes: "16x16",
        href: "/favicon-16x16.png",
      },
    ],
    [
      "link",
      {
        rel: "manifest",
        href: "/site.webmanifest",
      },
    ],
    [
      "link",
      {
        rel: "mask-icon",
        href: "/safari-pinned-tab.svg",
        color: "#5bbad5",
      },
    ],
    [
      "meta",
      {
        name: "msapplication-TileColor",
        content: "#211620",
      },
    ],
    [
      "meta",
      {
        name: "theme-color",
        content: "#211620",
      },
    ],

    // social metas
    ["meta", { property: "og:title", content: "Git Prompt Kit" }],
    [
      "meta",
      {
        property: "og:description",
        content:
          "A collection of configurable, fast Git status components for custom zsh themes",
      },
    ],
    [
      "meta",
      {
        property: "og:url",
        content: "https://git-prompt-kit.olets.dev/",
      },
    ],
    ["meta", { property: "og:site_name", content: "Git Prompt Kit" }],
    ["meta", { property: "og:type", content: "website" }],
    [
      "meta",
      {
        property: "og:image",
        content: "https://git-prompt-kit.olets.dev/images/git-prompt-kit.png",
      },
    ],
    ["meta", { property: "og:image:width", content: "1200" }],
    ["meta", { property: "og:image:height", content: "630" }],
    [
      "meta",
      {
        property: "og:image:alt",
        content: "The text 'Git Prompt Kit' in all-caps green neon lettering",
      },
    ],
    ["meta", { name: "twitter:title", content: "Git Prompt Kit" }],
    ["meta", { name: "twitter:card", content: "summary_large_image" }],
    [
      "meta",
      {
        name: "twitter:description",
        content:
          "A configurable set of components for creating feature rich, high performance Git-aware zsh prompts.",
      },
    ],

    // Analytics
    [
      "script",
      {
        src: "https://cdn.usefathom.com/script.js",
        "data-site": "IVUQPVDY",
        defer: true,
      },
    ],
    [
      "script",
      {
        src: "https://loose-saluki.pikapod.net/script.js",
        "data-website-id": "6bbfe00a-0d17-41be-8380-396ad295bdea",
        defer: "true",
      },
    ],
    [
      "script",
      {
        src: "/js/analytics.js",
      },
    ],
  ],

  // site config
  // https://v2.vuepress.vuejs.org/guide/configuration.html#site-config
  lang: "en-US",
  title: "Git Prompt Kit",
  description:
    "A configurable set of components for creating feature rich, high performance Git-aware zsh prompts.",

  markdown: {
    links: {
      externalAttrs: {
        class: "external-link",
        rel: "",
        target: "",
      },
    },
  },

  // default theme config
  // https://v2.vuepress.vuejs.org/guide/theme.html#default-theme
  theme: defaultTheme({
    contributors: false,
    lastUpdated: false,
    docsDir: "docs",
    docsRepo: "olets/git-prompt-kit-docs",
    navbar: [
      {
        text: "Changelog",
        link: "https://github.com/olets/git-prompt-kit/blob/main/CHANGELOG.md",
        target: "_self",
      },
      {
        text: "License",
        link: "https://github.com/olets/git-prompt-kit/blob/main/LICENSE",
        target: "_self",
      },
      // Manual instead of with defaultTheme's `repo` so that we can specify the `target`
      {
        text: "GitHub",
        link: "https://github.com/olets/git-prompt-kit",
        target: "_self",
      },
      {
        text: "olets.dev",
        link: "https://www.olets.dev",
        target: "_self",
      },
    ],
    sidebar: [
      {
        text: "Introduction",
        link: "/",
      },
      "/examples.md",
      "/installation.md",
      "/components.md",
      "/options.md",
      "/demo.md",
      "/integrations.md",
      "/recipes.md",
      "/performance.md",
      "/acknowledgments.md",
    ],
    sidebarDepth: 3,
    themePlugins: {
      externalLinkIcon: false,
    },
  }),

  plugins: [
    // https://v2.vuepress.vuejs.org/reference/plugin/docsearch.html
    docsearchPlugin({
      apiKey: process.env.SEARCH_KEY || "",
      indexName: process.env.INDEX_NAME || "",
      appId: process.env.APPLICATION_ID || "",
    }),
    // https://v2.vuepress.vuejs.org/reference/plugin/shiki.html
    shikiPlugin({
      // only github-dark and slack-dark pass color accessibility
      theme: "github-dark",
    }),
  ],
});
